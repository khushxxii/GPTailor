[build]
  command = "npm run build"
  functions = "netlify/functions"
  publish = ".netlify/functions"  # Override UI setting - functions don't need publish dir

[build.environment]
  NODE_VERSION = "18"
  # Configure secrets scanner to ignore example files and variable name references
  # Actual secrets are stored in Netlify environment variables, not in code
  SECRETS_SCAN_OMIT_PATHS = "env.example,README.md,.mcp.json"
  SECRETS_SCAN_OMIT_KEYS = "OPENAI_API_KEY,EMAIL_USER,EMAIL_PASS,CONTEXT7_API_KEY"

[functions]
  included_files = ["public/**"]

[[redirects]]
  from = "/*"
  to = "/.netlify/functions/server"
  status = 200

